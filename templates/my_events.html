{% extends 'base.html' %}
{% block main %}

<body>
    <h1>내 이벤트 목록</h1>
    {% if events %}
    <table>
        <thead>
            <tr>
                <th>이벤트 사진</th>
                <th>이벤트 제목</th>
                <th>이벤트 날짜</th>
            </tr>
        </thead>
        <tbody>
            {% for event in events %}
            <tr>
                <td>
                    <!-- 첨부파일 (이미지나 다른 파일이 있을 경우) -->
                    {% if event.filename %}
    <div class="row">
        <a href="{{ url_for('view_event', id=event.id) }}">
            <div class="col-md-12" style="width: 100%; overflow: hidden; max-width: 61.8%; height: auto; border-radius: 8px;">
                <!-- 파일이 이미지인 경우 -->
                {% if event.filename.endswith(('.png', '.jpg', '.jpeg', '.gif', '.bmp')) %}
                    <img src="{{ url_for('static', filename='uploads/' + event.filename) }}"
                         style="width: 100%; height: auto; object-fit: contain;">
                {% else %}
                    <!-- 이미지가 아닌 파일일 경우 -->
                    <a href="{{ url_for('static', filename='uploads/' + event.filename) }}" target="_blank">첨부 파일 다운로드</a>
                {% endif %}
            </div>
        </a>
    </div>
{% else %}
    <!-- 파일명이 없을 경우 기본 이미지 -->
    <div style="max-width: 61.8%; height: auto; border-radius: 8px; overflow: hidden;">
        <img src="{{ url_for('static', filename='uploads/thanos-gangnam-style.gif') }}" class="event-image"
             alt="기본 이미지" style="width: 100%; height: auto; object-fit: contain;">
    </div>
{% endif %}

                </td>
                <td>{{ event.title }}</td>
                <td>{{ event.start_date }}</td>
            </tr>
            {% endfor %}

        </tbody>
    </table>
    {% else %}
    <p>등록된 이벤트가 없습니다.</p>
    {% endif %}
    
    <form action="{{ url_for('event') }}" method="GET">
        <button type="submit">이벤트 보기</button>
    </form>
    
</body>
{% endblock %}